<!DOCTYPE html>
<html>
<head>
    <title>Semplice Applicazione di Test</title>
</head>
<body>
    <h1>Benvenuto nell'Applicazione di Test</h1>
    <button id="login">Login con Keycloak</button>
    <div id="userInfo" style="display:none;">
        <h2>Informazioni Utente</h2>
        <p>Username: <span id="username"></span></p>
    </div>

    <script src="node_modules/keycloak-js/dist/keycloak.min.js"></script>
    <script>
var keycloak = new Keycloak({
    url: 'http://localhost:8080/auth/',
    realm: 'master',
    clientId: 'ilclient',
    pkceMethod: 'S256' // Aggiungi questa linea
});


        document.getElementById('login').onclick = function() {
            keycloak.init({ onLoad: 'login-required' }).then(function(authenticated) {
                document.getElementById('userInfo').style.display = 'block';
                document.getElementById('username').innerHTML = keycloak.tokenParsed.preferred_username;
            }).catch(function() {
                alert('Autenticazione fallita');
            });
        };
    </script>
</body>
</html>
